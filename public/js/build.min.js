Element.prototype.hasClassName=function(t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(this.className)},Element.prototype.addClassName=function(t){return this.hasClassName(t)||(this.className=[this.className,t].join(" ")),this},Element.prototype.removeClassName=function(t){if(this.hasClassName(t)){var e=this.className;this.className=e.replace(new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)")," ")}return this},Element.prototype.toggleClassName=function(t){return this[this.hasClassName(t)?"removeClassName":"addClassName"](t),this},function(t){var e=3;t.flickrPhotos={},t.flickrPhotos.generateColClass=function(t,e){return"col-"+(Math.floor(t%e)+1)},t.flickrStore={getSelectedByKey:function(t){return localStorage.getItem(t+"_selected")},setSelectedByKey:function(t,e){"string"==typeof t&&"boolean"==typeof e&&(e?localStorage.setItem(t+"_selected",e):localStorage.removeItem(t+"_selected"))}},localStorage.getItem("tags")||localStorage.setItem("tags","dance");var n=localStorage.getItem("tags");t.flickrPhotos.generateView=function(n,r){var i=document.createElement("div"),s=document.createElement("img"),a=t.flickrPhotos.generateColClass(r,e),o=CryptoJS.MD5(JSON.stringify(n)).toString(),c=t.flickrStore.getSelectedByKey(o);return s.setAttribute("id",o),s.setAttribute("src",n.media.m),s.setAttribute("data-url",n.link),s.setAttribute("alt",n.title),"true"===c&&s.addClassName("selected"),i.addClassName("postcard").addClassName(a).appendChild(s),i},t.flickrPhotos.cb=function(e){for(var n=e.items,r=document.getElementById("display"),i=0;i<n.length;i++){var s=t.flickrPhotos.generateView(n[i],i);r.appendChild(s)}r.addEventListener("click",t.flickrPhotos.clickHandler,!0),r.addEventListener("dblclick",t.flickrPhotos.dblclickHandler,!0)},t.flickrPhotos.clickHandler=function(e){var n=e.target;if("IMG"===n.tagName){var r=n.getAttribute("id");n.toggleClassName("selected"),t.flickrStore.setSelectedByKey(r,n.hasClassName("selected"))}},t.flickrPhotos.dblclickHandler=function(t){var e=t.target;if("IMG"===e.tagName){var n=e.getAttribute("data-url");open(n,"_blank")}},t.flickrPhotos.onload=function(t){var e=document.createElement("script");e.setAttribute("id","flicker-api"),e.src="http://api.flickr.com/services/feeds/photos_public.gne?format=json&jsoncallback=window.flickrPhotos.cb&tags="+n,document.head.appendChild(e)},t.addEventListener("load",t.flickrPhotos.onload,!1)}(window);var CryptoJS=CryptoJS||function(t,e){var n={},r=n.lib={},i=function(){},s=r.Base={extend:function(t){i.prototype=this;var e=new i;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},a=r.WordArray=s.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:4*t.length},toString:function(t){return(t||c).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes;if(t=t.sigBytes,this.clamp(),r%4)for(var i=0;t>i;i++)e[r+i>>>2]|=(n[i>>>2]>>>24-8*(i%4)&255)<<24-8*((r+i)%4);else if(65535<n.length)for(i=0;t>i;i+=4)e[r+i>>>2]=n[i>>>2];else e.push.apply(e,n);return this.sigBytes+=t,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-8*(n%4),e.length=t.ceil(n/4)},clone:function(){var t=s.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n=[],r=0;e>r;r+=4)n.push(4294967296*t.random()|0);return new a.init(n,e)}}),o=n.enc={},c=o.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;t>r;r++){var i=e[r>>>2]>>>24-8*(r%4)&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;e>r;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-4*(r%8);return new a.init(n,e/2)}},l=o.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;t>r;r++)n.push(String.fromCharCode(e[r>>>2]>>>24-8*(r%4)&255));return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;e>r;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-8*(r%4);return new a.init(n,e)}},u=o.Utf8={stringify:function(t){try{return decodeURIComponent(escape(l.stringify(t)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(t){return l.parse(unescape(encodeURIComponent(t)))}},f=r.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=u.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,r=n.words,i=n.sigBytes,s=this.blockSize,o=i/(4*s),o=e?t.ceil(o):t.max((0|o)-this._minBufferSize,0);if(e=o*s,i=t.min(4*e,i),e){for(var c=0;e>c;c+=s)this._doProcessBlock(r,c);c=r.splice(0,e),n.sigBytes-=i}return new a.init(c,i)},clone:function(){var t=s.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});r.Hasher=f.extend({cfg:s.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new h.HMAC.init(t,n).finalize(e)}}});var h=n.algo={};return n}(Math);!function(t){function e(t,e,n,r,i,s,a){return t=t+(e&n|~e&r)+i+a,(t<<s|t>>>32-s)+e}function n(t,e,n,r,i,s,a){return t=t+(e&r|n&~r)+i+a,(t<<s|t>>>32-s)+e}function r(t,e,n,r,i,s,a){return t=t+(e^n^r)+i+a,(t<<s|t>>>32-s)+e}function i(t,e,n,r,i,s,a){return t=t+(n^(e|~r))+i+a,(t<<s|t>>>32-s)+e}for(var s=CryptoJS,a=s.lib,o=a.WordArray,c=a.Hasher,a=s.algo,l=[],u=0;64>u;u++)l[u]=4294967296*t.abs(t.sin(u+1))|0;a=a.MD5=c.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,s){for(var a=0;16>a;a++){var o=s+a,c=t[o];t[o]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}var a=this._hash.words,o=t[s+0],c=t[s+1],u=t[s+2],f=t[s+3],h=t[s+4],d=t[s+5],p=t[s+6],g=t[s+7],m=t[s+8],y=t[s+9],v=t[s+10],_=t[s+11],w=t[s+12],k=t[s+13],C=t[s+14],S=t[s+15],B=a[0],b=a[1],N=a[2],P=a[3],B=e(B,b,N,P,o,7,l[0]),P=e(P,B,b,N,c,12,l[1]),N=e(N,P,B,b,u,17,l[2]),b=e(b,N,P,B,f,22,l[3]),B=e(B,b,N,P,h,7,l[4]),P=e(P,B,b,N,d,12,l[5]),N=e(N,P,B,b,p,17,l[6]),b=e(b,N,P,B,g,22,l[7]),B=e(B,b,N,P,m,7,l[8]),P=e(P,B,b,N,y,12,l[9]),N=e(N,P,B,b,v,17,l[10]),b=e(b,N,P,B,_,22,l[11]),B=e(B,b,N,P,w,7,l[12]),P=e(P,B,b,N,k,12,l[13]),N=e(N,P,B,b,C,17,l[14]),b=e(b,N,P,B,S,22,l[15]),B=n(B,b,N,P,c,5,l[16]),P=n(P,B,b,N,p,9,l[17]),N=n(N,P,B,b,_,14,l[18]),b=n(b,N,P,B,o,20,l[19]),B=n(B,b,N,P,d,5,l[20]),P=n(P,B,b,N,v,9,l[21]),N=n(N,P,B,b,S,14,l[22]),b=n(b,N,P,B,h,20,l[23]),B=n(B,b,N,P,y,5,l[24]),P=n(P,B,b,N,C,9,l[25]),N=n(N,P,B,b,f,14,l[26]),b=n(b,N,P,B,m,20,l[27]),B=n(B,b,N,P,k,5,l[28]),P=n(P,B,b,N,u,9,l[29]),N=n(N,P,B,b,g,14,l[30]),b=n(b,N,P,B,w,20,l[31]),B=r(B,b,N,P,d,4,l[32]),P=r(P,B,b,N,m,11,l[33]),N=r(N,P,B,b,_,16,l[34]),b=r(b,N,P,B,C,23,l[35]),B=r(B,b,N,P,c,4,l[36]),P=r(P,B,b,N,h,11,l[37]),N=r(N,P,B,b,g,16,l[38]),b=r(b,N,P,B,v,23,l[39]),B=r(B,b,N,P,k,4,l[40]),P=r(P,B,b,N,o,11,l[41]),N=r(N,P,B,b,f,16,l[42]),b=r(b,N,P,B,p,23,l[43]),B=r(B,b,N,P,y,4,l[44]),P=r(P,B,b,N,w,11,l[45]),N=r(N,P,B,b,S,16,l[46]),b=r(b,N,P,B,u,23,l[47]),B=i(B,b,N,P,o,6,l[48]),P=i(P,B,b,N,g,10,l[49]),N=i(N,P,B,b,C,15,l[50]),b=i(b,N,P,B,d,21,l[51]),B=i(B,b,N,P,w,6,l[52]),P=i(P,B,b,N,f,10,l[53]),N=i(N,P,B,b,v,15,l[54]),b=i(b,N,P,B,c,21,l[55]),B=i(B,b,N,P,m,6,l[56]),P=i(P,B,b,N,S,10,l[57]),N=i(N,P,B,b,p,15,l[58]),b=i(b,N,P,B,k,21,l[59]),B=i(B,b,N,P,h,6,l[60]),P=i(P,B,b,N,_,10,l[61]),N=i(N,P,B,b,u,15,l[62]),b=i(b,N,P,B,y,21,l[63]);a[0]=a[0]+B|0,a[1]=a[1]+b|0,a[2]=a[2]+N|0,a[3]=a[3]+P|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;n[i>>>5]|=128<<24-i%32;var s=t.floor(r/4294967296);for(n[(i+64>>>9<<4)+15]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),n[(i+64>>>9<<4)+14]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(n.length+1),this._process(),e=this._hash,n=e.words,r=0;4>r;r++)i=n[r],n[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return e},clone:function(){var t=c.clone.call(this);return t._hash=this._hash.clone(),t}}),s.MD5=c._createHelper(a),s.HmacMD5=c._createHmacHelper(a)}(Math);